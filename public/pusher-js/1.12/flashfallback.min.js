/*!
 * Pusher JavaScript Library v1.12.3
 * http://pusherapp.com/
 *
 * Copyright 2011, Pusher
 * Released under the MIT licence.
 */
/*
 * This library contains code with the following licences:
 *
 * web_socket.js:
 *
 *   Copyright: Hiroshi Ichikawa <http://gimite.net/en/>
 *   License: New BSD License
 *   Reference: http://dev.w3.org/html5/websockets/
 *   Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol
 *
 * swfobject.js:
 *
 *   SWFObject v2.2 <http://code.google.com/p/swfobject/>
 *   is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 *
 * FABridge.js:
 *
 *   Copyright 2006 Adobe Systems Incorporated
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"),
 *   to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *   and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 */

var swfobject=function(){function h(){if(!x){try{var b=d.getElementsByTagName("body")[0].appendChild(d.createElement("span"));b.parentNode.removeChild(b)}catch(f){return}x=!0;for(var b=C.length,j=0;j<b;j++)C[j]()}}function a(b){x?b():C[C.length]=b}function c(b){if(typeof p.addEventListener!=k)p.addEventListener("load",b,!1);else if(typeof d.addEventListener!=k)d.addEventListener("load",b,!1);else if(typeof p.attachEvent!=k)U(p,"onload",b);else if(typeof p.onload=="function"){var f=p.onload;p.onload=
function(){f();b()}}else p.onload=b}function o(){var b=d.getElementsByTagName("body")[0],f=d.createElement(s);f.setAttribute("type",D);var j=b.appendChild(f);if(j){var a=0;(function(){if(typeof j.GetVariable!=k){var g=j.GetVariable("$version");if(g)g=g.split(" ")[1].split(","),e.pv=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}else if(a<10){a++;setTimeout(arguments.callee,10);return}b.removeChild(f);j=null;u()})()}else u()}function u(){var b=v.length;if(b>0)for(var f=0;f<b;f++){var j=v[f].id,
a=v[f].callbackFn,g={success:!1,id:j};if(e.pv[0]>0){var d=q(j);if(d)if(E(v[f].swfVersion)&&!(e.wk&&e.wk<312)){if(y(j,!0),a)g.success=!0,g.ref=A(j),a(g)}else if(v[f].expressInstall&&r()){g={};g.data=v[f].expressInstall;g.width=d.getAttribute("width")||"0";g.height=d.getAttribute("height")||"0";if(d.getAttribute("class"))g.styleclass=d.getAttribute("class");if(d.getAttribute("align"))g.align=d.getAttribute("align");for(var c={},d=d.getElementsByTagName("param"),m=d.length,n=0;n<m;n++)d[n].getAttribute("name").toLowerCase()!=
"movie"&&(c[d[n].getAttribute("name")]=d[n].getAttribute("value"));I(g,c,j,a)}else V(d),a&&a(g)}else if(y(j,!0),a){if((j=A(j))&&typeof j.SetVariable!=k)g.success=!0,g.ref=j;a(g)}}}function A(b){var f=null;if((b=q(b))&&b.nodeName=="OBJECT")typeof b.SetVariable!=k?f=b:(b=b.getElementsByTagName(s)[0])&&(f=b);return f}function r(){return!F&&E("6.0.65")&&(e.win||e.mac)&&!(e.wk&&e.wk<312)}function I(b,f,a,l){F=!0;J=l||null;N={success:!1,id:a};var g=q(a);if(g){g.nodeName=="OBJECT"?(B=K(g),G=null):(B=g,G=
a);b.id=O;if(typeof b.width==k||!/%$/.test(b.width)&&parseInt(b.width,10)<310)b.width="310";if(typeof b.height==k||!/%$/.test(b.height)&&parseInt(b.height,10)<137)b.height="137";d.title=d.title.slice(0,47)+" - Flash Player Installation";l=e.ie&&e.win?"ActiveX":"PlugIn";l="MMredirectURL="+p.location.toString().replace(/&/g,"%26")+"&MMplayerType="+l+"&MMdoctitle="+d.title;typeof f.flashvars!=k?f.flashvars+="&"+l:f.flashvars=l;if(e.ie&&e.win&&g.readyState!=4)l=d.createElement("div"),a+="SWFObjectNew",
l.setAttribute("id",a),g.parentNode.insertBefore(l,g),g.style.display="none",function(){g.readyState==4?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}();L(b,f,a)}}function V(b){if(e.ie&&e.win&&b.readyState!=4){var f=d.createElement("div");b.parentNode.insertBefore(f,b);f.parentNode.replaceChild(K(b),f);b.style.display="none";(function(){b.readyState==4?b.parentNode.removeChild(b):setTimeout(arguments.callee,10)})()}else b.parentNode.replaceChild(K(b),b)}function K(b){var f=d.createElement("div");
if(e.win&&e.ie)f.innerHTML=b.innerHTML;else if(b=b.getElementsByTagName(s)[0])if(b=b.childNodes)for(var a=b.length,l=0;l<a;l++)!(b[l].nodeType==1&&b[l].nodeName=="PARAM")&&b[l].nodeType!=8&&f.appendChild(b[l].cloneNode(!0));return f}function L(b,f,a){var l,g=q(a);if(e.wk&&e.wk<312)return l;if(g){if(typeof b.id==k)b.id=a;if(e.ie&&e.win){var c="",i;for(i in b)if(b[i]!=Object.prototype[i])i.toLowerCase()=="data"?f.movie=b[i]:i.toLowerCase()=="styleclass"?c+=' class="'+b[i]+'"':i.toLowerCase()!="classid"&&
(c+=" "+i+'="'+b[i]+'"');i="";for(var m in f)f[m]!=Object.prototype[m]&&(i+='<param name="'+m+'" value="'+f[m]+'" />');g.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+c+">"+i+"</object>";H[H.length]=b.id;l=q(b.id)}else{m=d.createElement(s);m.setAttribute("type",D);for(var n in b)b[n]!=Object.prototype[n]&&(n.toLowerCase()=="styleclass"?m.setAttribute("class",b[n]):n.toLowerCase()!="classid"&&m.setAttribute(n,b[n]));for(c in f)f[c]!=Object.prototype[c]&&c.toLowerCase()!=
"movie"&&(b=m,i=c,n=f[c],a=d.createElement("param"),a.setAttribute("name",i),a.setAttribute("value",n),b.appendChild(a));g.parentNode.replaceChild(m,g);l=m}}return l}function P(b){var f=q(b);if(f&&f.nodeName=="OBJECT")e.ie&&e.win?(f.style.display="none",function(){if(f.readyState==4){var a=q(b);if(a){for(var d in a)typeof a[d]=="function"&&(a[d]=null);a.parentNode.removeChild(a)}}else setTimeout(arguments.callee,10)}()):f.parentNode.removeChild(f)}function q(b){var f=null;try{f=d.getElementById(b)}catch(a){}return f}
function U(b,f,a){b.attachEvent(f,a);z[z.length]=[b,f,a]}function E(b){var a=e.pv,b=b.split(".");b[0]=parseInt(b[0],10);b[1]=parseInt(b[1],10)||0;b[2]=parseInt(b[2],10)||0;return a[0]>b[0]||a[0]==b[0]&&a[1]>b[1]||a[0]==b[0]&&a[1]==b[1]&&a[2]>=b[2]?!0:!1}function Q(b,a,j,c){if(!e.ie||!e.mac){var g=d.getElementsByTagName("head")[0];if(g){j=j&&typeof j=="string"?j:"screen";c&&(M=t=null);if(!t||M!=j)c=d.createElement("style"),c.setAttribute("type","text/css"),c.setAttribute("media",j),t=g.appendChild(c),
e.ie&&e.win&&typeof d.styleSheets!=k&&d.styleSheets.length>0&&(t=d.styleSheets[d.styleSheets.length-1]),M=j;e.ie&&e.win?t&&typeof t.addRule==s&&t.addRule(b,a):t&&typeof d.createTextNode!=k&&t.appendChild(d.createTextNode(b+" {"+a+"}"))}}}function y(b,a){if(R){var c=a?"visible":"hidden";x&&q(b)?q(b).style.visibility=c:Q("#"+b,"visibility:"+c)}}function S(b){return/[\\\"<>\.;]/.exec(b)!=null&&typeof encodeURIComponent!=k?encodeURIComponent(b):b}var k="undefined",s="object",D="application/x-shockwave-flash",
O="SWFObjectExprInst",p=window,d=document,w=navigator,T=!1,C=[function(){T?o():u()}],v=[],H=[],z=[],B,G,J,N,x=!1,F=!1,t,M,R=!0,e=function(){var b=typeof d.getElementById!=k&&typeof d.getElementsByTagName!=k&&typeof d.createElement!=k,a=w.userAgent.toLowerCase(),c=w.platform.toLowerCase(),e=c?/win/.test(c):/win/.test(a),c=c?/mac/.test(c):/mac/.test(a),a=/webkit/.test(a)?parseFloat(a.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!+"\u000b1",o=[0,0,0],i=null;if(typeof w.plugins!=k&&typeof w.plugins["Shockwave Flash"]==
s){if((i=w.plugins["Shockwave Flash"].description)&&!(typeof w.mimeTypes!=k&&w.mimeTypes[D]&&!w.mimeTypes[D].enabledPlugin))T=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof p.ActiveXObject!=k)try{var m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(m&&(i=m.GetVariable("$version")))g=!0,i=i.split(" ")[1].split(","),
o=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]}catch(n){}return{w3:b,pv:o,wk:a,ie:g,win:e,mac:c}}();(function(){e.w3&&((typeof d.readyState!=k&&d.readyState=="complete"||typeof d.readyState==k&&(d.getElementsByTagName("body")[0]||d.body))&&h(),x||(typeof d.addEventListener!=k&&d.addEventListener("DOMContentLoaded",h,!1),e.ie&&e.win&&(d.attachEvent("onreadystatechange",function(){d.readyState=="complete"&&(d.detachEvent("onreadystatechange",arguments.callee),h())}),p==top&&function(){if(!x){try{d.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,
0);return}h()}}()),e.wk&&function(){x||(/loaded|complete/.test(d.readyState)?h():setTimeout(arguments.callee,0))}(),c(h)))})();(function(){e.ie&&e.win&&window.attachEvent("onunload",function(){for(var b=z.length,a=0;a<b;a++)z[a][0].detachEvent(z[a][1],z[a][2]);b=H.length;for(a=0;a<b;a++)P(H[a]);for(var c in e)e[c]=null;e=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(b,a,c,d){if(e.w3&&b&&a){var g={};g.id=b;g.swfVersion=a;g.expressInstall=c;g.callbackFn=
d;v[v.length]=g;y(b,!1)}else d&&d({success:!1,id:b})},getObjectById:function(a){if(e.w3)return A(a)},embedSWF:function(b,f,c,d,g,o,i,m,n,h){var p={success:!1,id:f};e.w3&&!(e.wk&&e.wk<312)&&b&&f&&c&&d&&g?(y(f,!1),a(function(){c+="";d+="";var a={};if(n&&typeof n===s)for(var e in n)a[e]=n[e];a.data=b;a.width=c;a.height=d;e={};if(m&&typeof m===s)for(var u in m)e[u]=m[u];if(i&&typeof i===s)for(var q in i)typeof e.flashvars!=k?e.flashvars+="&"+q+"="+i[q]:e.flashvars=q+"="+i[q];if(E(g))u=L(a,e,f),a.id==
f&&y(f,!0),p.success=!0,p.ref=u;else if(o&&r()){a.data=o;I(a,e,f,h);return}else y(f,!0);h&&h(p)})):h&&h(p)},switchOffAutoHideShow:function(){R=!1},ua:e,getFlashPlayerVersion:function(){return{major:e.pv[0],minor:e.pv[1],release:e.pv[2]}},hasFlashPlayerVersion:E,createSWF:function(a,f,c){if(e.w3)return L(a,f,c)},showExpressInstall:function(a,f,c,d){e.w3&&r()&&I(a,f,c,d)},removeSWF:function(a){e.w3&&P(a)},createCSS:function(a,c,d,o){e.w3&&Q(a,c,d,o)},addDomLoadEvent:a,addLoadEvent:c,getQueryParamValue:function(a){var c=
d.location.search||d.location.hash;if(c){/\?/.test(c)&&(c=c.split("?")[1]);if(a==null)return S(c);for(var c=c.split("&"),e=0;e<c.length;e++)if(c[e].substring(0,c[e].indexOf("="))==a)return S(c[e].substring(c[e].indexOf("=")+1))}return""},expressInstallCallback:function(){if(F){var a=q(O);if(a&&B){a.parentNode.replaceChild(B,a);if(G&&(y(G,!0),e.ie&&e.win))B.style.display="block";J&&J(N)}F=!1}}}}();
(function(){if(!window.WEB_SOCKET_FORCE_FLASH)if(window.WebSocket)return;else if(window.MozWebSocket){window.WebSocket=MozWebSocket;return}var h;h=window.WEB_SOCKET_LOGGER?WEB_SOCKET_LOGGER:window.console&&window.console.log&&window.console.error?window.console:{log:function(){},error:function(){}};swfobject.getFlashPlayerVersion().major<10?h.error("Flash Player >= 10.0.0 is required."):(location.protocol=="file:"&&h.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),
window.WebSocket=function(a,c,o,h,A){var r=this;r.__id=WebSocket.__nextId++;WebSocket.__instances[r.__id]=r;r.readyState=WebSocket.CONNECTING;r.bufferedAmount=0;r.__events={};c?typeof c=="string"&&(c=[c]):c=[];r.__createTask=setTimeout(function(){WebSocket.__addTask(function(){r.__createTask=null;WebSocket.__flash.create(r.__id,a,c,o||null,h||0,A||null)})},0)},WebSocket.prototype.send=function(a){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";
a=WebSocket.__flash.send(this.__id,encodeURIComponent(a));return a<0?!0:(this.bufferedAmount+=a,!1)},WebSocket.prototype.close=function(){if(this.__createTask)clearTimeout(this.__createTask),this.__createTask=null,this.readyState=WebSocket.CLOSED;else if(!(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING))this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id)},WebSocket.prototype.addEventListener=function(a,c){a in this.__events||(this.__events[a]=[]);this.__events[a].push(c)},
WebSocket.prototype.removeEventListener=function(a,c){if(a in this.__events)for(var o=this.__events[a],h=o.length-1;h>=0;--h)if(o[h]===c){o.splice(h,1);break}},WebSocket.prototype.dispatchEvent=function(a){for(var c=this.__events[a.type]||[],h=0;h<c.length;++h)c[h](a);(c=this["on"+a.type])&&c.apply(this,[a])},WebSocket.prototype.__handleEvent=function(a){if("readyState"in a)this.readyState=a.readyState;if("protocol"in a)this.protocol=a.protocol;var c;if(a.type=="open"||a.type=="error")c=this.__createSimpleEvent(a.type);
else if(a.type=="close")c=this.__createSimpleEvent("close"),c.wasClean=a.wasClean?!0:!1,c.code=a.code,c.reason=a.reason;else if(a.type=="message")c=this.__createMessageEvent("message",decodeURIComponent(a.message));else throw"unknown event type: "+a.type;this.dispatchEvent(c)},WebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&window.Event){var c=document.createEvent("Event");c.initEvent(a,!1,!1);return c}else return{type:a,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=
function(a,c){if(document.createEvent&&window.MessageEvent&&!window.opera){var h=document.createEvent("MessageEvent");h.initMessageEvent("message",!1,!1,c,null,null,window,null);return h}else return{type:a,data:c,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__initialized=!1,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})},
WebSocket.__initialize=function(){if(!WebSocket.__initialized){WebSocket.__initialized=!0;if(WebSocket.__swfLocation)window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation;if(window.WEB_SOCKET_SWF_LOCATION){if(!window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR&&!WEB_SOCKET_SWF_LOCATION.match(/(^|\/)WebSocketMainInsecure\.swf(\?.*)?$/)&&WEB_SOCKET_SWF_LOCATION.match(/^\w+:\/\/([^\/]+)/)){var a=RegExp.$1;location.host!=a&&h.error("[WebSocket] You must host HTML and WebSocketMain.swf in the same host ('"+
location.host+"' != '"+a+"'). See also 'How to host HTML file and SWF file in different domains' section in README.md. If you use WebSocketMainInsecure.swf, you can suppress this message by WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR = true;")}a=document.createElement("div");a.id="webSocketContainer";a.style.position="absolute";WebSocket.__isFlashLite()?(a.style.left="0px",a.style.top="0px"):(a.style.left="-100px",a.style.top="-100px");var c=document.createElement("div");c.id="webSocketFlash";a.appendChild(c);
document.body.appendChild(a);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(a){a.success||h.error("[WebSocket] swfobject.embedSWF failed")})}else h.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);
WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<WebSocket.__tasks.length;++a)WebSocket.__tasks[a]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){setTimeout(function(){try{for(var a=WebSocket.__flash.receiveEvents(),c=0;c<a.length;++c)WebSocket.__instances[a[c].webSocketId].__handleEvent(a[c])}catch(o){h.error(o)}},0);return!0},WebSocket.__log=function(a){h.log(decodeURIComponent(a))},WebSocket.__error=function(a){h.error(decodeURIComponent(a))},WebSocket.__addTask=
function(a){WebSocket.__flash?a():WebSocket.__tasks.push(a)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return!a||!a.enabledPlugin||!a.enabledPlugin.filename?!1:a.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||swfobject.addDomLoadEvent(function(){WebSocket.__initialize()}))})();